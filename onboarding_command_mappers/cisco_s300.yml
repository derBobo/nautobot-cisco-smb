---
sync_devices:
  hostname:
    commands:
      - command: "show system"
        parser: "ttp"
        jpath: "[0].hostname"
  serial:
    commands:
      - command: "show inventory"
        parser: "ttp"
        jpath: "inventory[?(@.name=='1')].sn"
  device_type:
    commands:
      - command: "show inventory"
        parser: "ttp"
        jpath: "inventory[?(@.name=='1')].pid"
  mgmt_interface:
    commands:
      - command: "show ip interface"
        parser: "textfsm"
        jpath: "[?ip_address=='{{ obj }}'].i//f || [`mgmt0`]"
  mask_length:
    commands:
      - command: "show ip interface"
        parser: "textfsm"
        jpath: "[?ip_address=='{{ obj }}'].ip_address"
        post_processor: "{% if '/' in obj[0] %}{{ obj[0].split('/')[1] }}{% else %}31{% endif %}"
        iterable_type: "int"
