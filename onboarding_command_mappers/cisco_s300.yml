---
sync_devices:
  hostname:
    commands:
      - command: "show system"
        parser: "ttp"
        jpath: "[0].hostname"
  serial:
    commands:
      - command: "show inventory"
        parser: "ttp"
        jpath: "[0].inventory[? name == '1'] | [0].sn"
  device_type:
    commands:
      - command: "show inventory"
        parser: "ttp"
        jpath: "[0].inventory[? name == '1'] | [0].pid"
  mgmt_interface:
    commands:
      - command: "show ip interface"
        parser: "ttp"
        jpath: "[0].interfaces[?ip_address=='{{ obj }}'].interface"
  mask_length:
    commands:
      - command: "show ip interface"
        parser: "textfsm"
        jpath: "[0].interfaces[?ip_address=='{{ obj }}'].mask"
        post_processor: "{% if '/' in obj[0] %}{{ obj[0].split('/')[1] }}{% else %}31{% endif %}"
        iterable_type: "int"
